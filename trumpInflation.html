<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Trump - Inflation Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background-color: #f4f6f9;
    color: #2c3e50;
}

/* Top Header */
.topbar {
    background-color: #1f4e79;
    color: white;
    padding: 18px 30px;
    font-size: 20px;
    font-weight: 600;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 1000;
}

/* Sidebar */
#mySidebar {
    position: fixed;
    left: 0;
    top: 60px;
    width: 240px;
    height: calc(100% - 60px);
    background-color: #ffffff;
    border-right: 1px solid #e0e6ed;
    padding-top: 20px;
    overflow-y: auto;
}

#mySidebar a {
    display: block;
    padding: 14px 25px;
    text-decoration: none;
    color: #34495e;
    font-size: 14px;
    transition: 0.2s ease;
}

#mySidebar a:hover {
    background-color: #e8f1fb;
    color: #1f4e79;
    font-weight: 500;
}

/* Main Content */
#main {
    margin-left: 240px;
    padding: 100px 40px 40px 40px;
}

h1 {
    color: #1f4e79;
    margin-bottom: 20px;
}

h2 {
    color: #1f4e79;
    margin-top: 25px;
    margin-bottom: 10px;
}

p {
    margin-bottom: 15px;
    line-height: 1.6;
}

/* Dashboard Chart */
.dashboard {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    margin-bottom: 40px;
}

canvas {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

/* Info Boxes */
.info-boxes {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.info-box {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.info-box h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    color: #6c7a89;
}

.info-box p {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #1f4e79;
}

/* Checkbox Container */
.checkbox-container {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    margin-bottom: 30px;
}
.checkbox-container label {
    display: block;
    margin-bottom: 8px;
}

.dashboard {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    margin: 20px 0 40px 0;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <script src="script.js"></script>


<div class="topbar">Financial Helper Dashboard</div>

<div id="mySidebar">
    <a href="#chart">Inflation Chart</a>
    <a href="#strategy">Trump's Plan</a>
    <a href="#details">Additional Info</a>
</div>

<div id="main">
<h1>Donald J. Trump - Inflation Dashboard</h1>

<!-- Info Boxes -->
<div class="info-boxes">
    <div class="info-box">
        <h3>Focus Area</h3>
        <p>Energy, Taxes, Spending, Manufacturing</p>
    </div>
    <div class="info-box">
        <h3>Target Inflation</h3>
        <p>2-3%</p>
    </div>
    <div class="info-box">
        <h3>Major Policies</h3>
        <p>Tax cuts, Tariffs, Oil production, Government efficiency</p>
    </div>
</div>

<!-- Checkbox selectors for categories -->
<div class="checkbox-container" id="checkboxes">
    <strong>Select CPI Categories to Display:</strong>
    <!-- Checkboxes will be dynamically added here -->
</div>

<!-- Chart -->
        <div class="dashboard" id="chart">
            <canvas id="inflationChart"></canvas>
        </div>

<!-- Strategy -->
<div id="strategy">
    <h2>Trump's Four-Point Inflation Plan</h2>
        <p>Trump plans to end inflation using these strategies:</p>
    <h2>1. Lower taxes within America's borders, incentivizing companies to operate locally.</h2>
        <p>
            <b>Economic Rationale:</b><br>
            President Trump claimed that he would lower taxes within American borders, incentivizing companies to operate locally. If his plan is successful, then GDP (gross domestic 
            product) would be expected to increase. GDP measures the total value of goods and services produced in a country, and an increase in GDP typically indicates 
            economic growth. By lowering taxes, businesses may have more capital to invest in expansion, hiring, and innovation, which can lead to increased production 
            and economic activity. This, in turn, could contribute to higher GDP. However, the actual impact on GDP would depend on various factors such as the specific tax
            policies implemented, the response of businesses and consumers, and overall economic conditions.
            <br><br>
            <b>Policy Details</b><br>
            On July 4th, 2025, President Trump passed the One, Big, Beautiful Bill Act, which significantly affected federal taxes, credits, and deductions. The bill 
            included provisions that lowered corporate tax rates, provided tax credits for domestic manufacturing, and simplified the tax code for small businesses. 
            One of the relevant sections is the Qualified Production Property (Section70307). This provision allows businesses to deduct 100 percent of the cost of 
            property bought and put into use, mainly intended to help businesses that purchase equipment and machinery, plants, or other property used in manufacturing.
        </p>
        <!-- GDP Chart -->
        <div class="dashboard">
            <canvas id="gdpChart"></canvas>
        </div>
        <p>
            <b>Economic Analysis:</b><br>
            The GDP growth chart above shows the quarterly GDP growth rates from Q4 2021 (October-December 2021) to Q3 2025 (July-September 2025). The vertical dashed line indicates 
            the implementation of Trump's One, Big, Beautiful Bill Act in Q1 2025. As shown on the chart, there is a very clear drop in GDP when the policy is implemented, followed
            by an increase in GDP growth in the subsequent quarters. It is important also to note that the graph showss the GDP growth rates <i>in percentages</i>. This means that, 
            when the policy was first implemented, the GDP decreased by -0.6%, bordering on a recession. While GDP is increasing in the following quarters, it is still below the 
            pre-policy levels. This suggests that while there may be some positive impact from the policy, it has not yet fully reversed the initial decline in GDP. It is also
            important to consider other factors that may have influenced GDP during this period, such as global economic conditions, consumer confidence, and other fiscal or 
            monetary policies.
        </p>
    <h2>2. Raise tariffs to generate revenue and encourage American manufacturing.</h2>
        <p>Trump's plan economic explanation</p>

        <div class="dashboard">
            <canvas id="tariffChart"></canvas>
        </div>
    <h2>3. Increase domestic oil production to reduce energy costs.</h2>
    <p>Trump's plan economic explanation</p>
</div>


<div id="details">
    <h4>Background on Inflation Trends</h4>
    <p>The Consumer Price Index (CPI) measures the 12-month percent change in prices for goods and services.</p>
</div>

</div> <!-- CLOSE main -->

<script>
const labels = [
    'Dec 2020–Dec 2021',
    'Dec 2021–Dec 2022',
    'Dec 2022–Dec 2023',
    'Dec 2023–Dec 2024',
    'Dec 2024–Dec 2025'
];

// CPI data
const cpiData = {
    "Beverage materials including coffee and tea": [3.9, 13.8, 0.3, 3.5, 11.8],
    "Utility (piped) gas service": [24.1, 19.3, -13.8, 4.9, 10.8],
    "Fuel oil": [41.0, 41.5, -14.7, -13.1, 7.4],
    "Tobacco and smoking products": [9.0, 5.5, 7.8, 6.7, 6.8],
    "All items": [7.0, 6.5, 3.4, 2.9, 2.7]
};

const colors = [
    'rgba(31,78,121,1)',
    'rgba(244,67,54,1)',
    'rgba(76,175,80,1)',
    'rgba(255,193,7,1)',
    'rgba(156,39,176,1)'
];

// Inflation Chart
const ctx = document.getElementById('inflationChart').getContext('2d');

const inflationChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: labels,
        datasets: []
    },
    options: {
        responsive: true,
        plugins: {
            title: {
                display: true,
                text: '12-Month Percent Change in CPI for Selected Items'
            }
        }
    }
});

const checkboxContainer = document.getElementById('checkboxes');

Object.keys(cpiData).forEach((category, i) => {
    const label = document.createElement('label');
    const checkbox = document.createElement('input');

    checkbox.type = 'checkbox';
    checkbox.value = category;
    checkbox.checked = i < 3;
    checkbox.addEventListener('change', updateChart);

    label.appendChild(checkbox);
    label.appendChild(document.createTextNode(" " + category));
    checkboxContainer.appendChild(label);
});

function updateChart() {
    const selected = Array.from(
        checkboxContainer.querySelectorAll('input:checked')
    ).map(cb => cb.value);

    inflationChart.data.datasets = selected.map((category, index) => ({
        label: category,
        data: cpiData[category],
        borderColor: colors[index % colors.length],
        backgroundColor: colors[index % colors.length].replace('1)', '0.2)'),
        fill: true,
        tension: 0.4
    }));

    inflationChart.update();
}

// Initial render
updateChart();


// =======================
// GDP CHART (Separate)
// =======================

const gdpLabels = [
    'Q4 21', 'Q1 22', 'Q2 22','Q3 22','Q4 22','Q1 23',
    'Q2 23','Q3 23','Q4 23','Q1 24','Q2 24','Q3 24','Q4 24','Q1 25','Q2 25','Q3 25'
];

const gdpData = [
    7.0, -1.0, 0.6, 2.9, 2.8, 2.9,
    2.5, 4.7, 3.4, 0.8, 3.6, 3.3, 1.9, -0.6, 3.8, 4.4
];

const gdpCtx = document.getElementById('gdpChart').getContext('2d');

// Find index of Q1 25
const policyIndex = gdpLabels.indexOf('Q1 25');

// Vertical Line Plugin
const verticalLinePlugin = {
    id: 'verticalLinePlugin',
    afterDraw(chart) {
        const { ctx, chartArea: { top, bottom }, scales: { x } } = chart;

        const policyIndex = gdpLabels.indexOf('Q1 25');
        const xPosition = x.getPixelForValue(policyIndex);

        ctx.save();
        ctx.beginPath();
        ctx.setLineDash([6, 6]);
        ctx.moveTo(xPosition, top);
        ctx.lineTo(xPosition, bottom);
        ctx.lineWidth = 2;
        ctx.strokeStyle = 'rgba(0,0,0,0.6)';
        ctx.stroke();
        ctx.setLineDash([]);

        // Label
        ctx.fillStyle = 'rgba(0,0,0,0.8)';
        ctx.font = '12px Segoe UI';
        ctx.fillText('Policy Implementation', xPosition + 6, top + 15);

        ctx.restore();
    }
};

new Chart(gdpCtx, {
    plugins: [verticalLinePlugin],
    type: 'line',
    data: {
        labels: gdpLabels,
        datasets: [{
            label: 'Quarterly GDP Growth (%)',
            data: gdpData,
            fill: true,
            tension: 0.3,
            pointRadius: 4,

            // Dynamic segment coloring
            segment: {
                borderColor: ctx => {
                    return ctx.p0DataIndex < policyIndex
                        ? 'rgba(150,150,150,1)'   // Gray before Q1 25
                        : 'rgba(31,78,121,1)';    // Blue Q1 25 and after
                },
                backgroundColor: ctx => {
                    return ctx.p0DataIndex < policyIndex
                        ? 'rgba(150,150,150,0.2)'
                        : 'rgba(31,78,121,0.2)';
                }
            },

            // Point colors
            pointBackgroundColor: context => {
                return context.dataIndex < policyIndex
                    ? 'rgba(150,150,150,1)'
                    : 'rgba(31,78,121,1)';
            }
        }]
    },
    options: {
        responsive: true,
        plugins: {
            title: {
                display: true,
                text: 'Quarterly GDP Growth Rate'
            },
            legend: {
                display: false
            }
        },
        scales: {
            y: {
                title: {
                    display: true,
                    text: 'Percent Growth (%)'
                }
            }
        }
    }
});

document.getElementById('tariffFileInput')
  .addEventListener('change', handleFileSelect, false);

function handleFileSelect(event){
    console.log("Tariff file selected");
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = function(e)
    {
        console.log("CSV loaded");
        const csvData = e.target.result;
        displayAsTable(csvData);

        const parsed = parseTariffCSV(csvData);
        renderTariffChart(parsed);
    };

    reader.readAsText(file);
}

function displayAsTable(csv)
{
    const lines = csv.trim().split(/\r?\n/);
    const tableHead = document.querySelector('#tariffTable thead');
    const tableBody = document.querySelector('#tariffTable tbody');

    tableHead.innerHTML = '';
    tableBody.innerHTML = '';

    const headers = lines[0].split(',');
    let headerRow = '<tr>';
        headers.forEach(header => {
            headerRow += `<th>${header}</th>`;
        });
    headerRow += '</tr>';
    tableHead.innerHTML = headerRow;

    for(let i = 1; i<lines.length; i++)
    {
        const cells = lines[i].split(',');
        if (cells.length === headers.length)
    {
        let row = '<tr>';
            cells.forEach(cell => {
                row += `<td>${cell}</td>`;
            });
        row += '</tr>';
        tableBody.innerHTML += row;
    }
    }
}

</script>
<script>
let tariffChart;

// Parse CSV into usable arrays
function parseTariffCSV(csvText) {
    const rows = csvText.trim().split('\n');
    const headers = rows[0].split(',');

    const yearIndex = headers.indexOf('Date');
    const tariffIndex = headers.indexOf('Customs duties (nominal USD)');

    const labels = [];
    const tariffValues = [];

    for (let i = 1; i < rows.length; i++) {
        const cols = rows[i].split(',');
        labels.push(cols[yearIndex]);
        tariffValues.push(parseFloat(cols[tariffIndex]));
    }

    return { labels, tariffValues };
}

// Create chart
function renderTariffChart(data) {
    const ctx = document.getElementById('tariffChart').getContext('2d');

    if (tariffChart) tariffChart.destroy();

    tariffChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: data.labels,
            datasets: [{
                label: 'Average U.S. Tariff Rate (%)',
                data: data.tariffValues,
                borderColor: 'rgba(31,78,121,1)',
                backgroundColor: 'rgba(31,78,121,0.2)',
                fill: true,
                tension: 0.4,
                pointRadius: 4
            }]
        },
        options: {
            responsive: true,
            plugins: {
                title: {
                    display: true,
                    text: 'U.S. Tariff Rates Over Time'
                },
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    title: {
                        display: true,
                        text: 'Customs Duties (nominal USD)'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Date'
                    }
                }
            }
        }
    });
}

</script>

<script>
/* =========================
   TARIFF DATA (EMBEDDED)
========================= */

const tariffLabels = [
  "Jan-20","Feb-20","Mar-20","Apr-20","May-20","Jun-20","Jul-20","Aug-20","Sep-20","Oct-20","Nov-20","Dec-20",
  "Jan-21","Feb-21","Mar-21","Apr-21","May-21","Jun-21","Jul-21","Aug-21","Sep-21","Oct-21","Nov-21","Dec-21",
  "Jan-22","Feb-22","Mar-22","Apr-22","May-22","Jun-22","Jul-22","Aug-22","Sep-22","Oct-22","Nov-22","Dec-22",
  "Jan-23","Feb-23","Mar-23","Apr-23","May-23","Jun-23","Jul-23","Aug-23","Sep-23","Oct-23","Nov-23","Dec-23",
  "Jan-24","Feb-24","Mar-24","Apr-24","May-24","Jun-24","Jul-24","Aug-24","Sep-24","Oct-24","Nov-24","Dec-24",
  "Jan-25","Feb-25","Mar-25","Apr-25","May-25","Jun-25","Jul-25","Aug-25","Sep-25","Oct-25","Nov-25","Dec-25","Jan-26"
];

const tariffValues = [
  6918,6286,4815,4114,3833,4480,5013,5896,6049,6156,5965,6047,
  5871,6323,6275,7128,6433,7150,7509,7270,7857,7770,7816,8187,
  8587,8049,8151,9162,8095,8364,8530,8456,8741,8163,7171,6552,
  6838,6349,6152,6350,6373,6475,6910,6325,6678,6903,6296,5744,
  6477,6208,6064,6367,5225,6323,7133,7047,7249,7297,6712,6814,
  7341,7247,8168,15634,22173,26632,27670,29503,29675,31354,30756,27892,27742
];

/* =========================
   TARIFF CHART
========================= */

const tariffCtx = document.getElementById('tariffChart').getContext('2d');

new Chart(tariffCtx, {
  type: 'line',
  data: {
    labels: tariffLabels,
    datasets: [{
      label: 'Customs Duties (Nominal USD)',
      data: tariffValues,
      borderColor: 'rgba(31,78,121,1)',
      backgroundColor: 'rgba(31,78,121,0.2)',
      fill: true,
      tension: 0.35,
      pointRadius: 2
    }]
  },
  options: {
    responsive: true,
    plugins: {
      title: {
        display: true,
        text: 'U.S. Customs Duties Collected Over Time'
      },
      legend: {
        display: false
      }
    },
    scales: {
      y: {
        title: {
          display: true,
          text: 'Nominal USD (Millions)'
        }
      },
      x: {
        ticks: {
          maxRotation: 45,
          minRotation: 45
        }
      }
    }
  }
});
</script>

</body>
</html>
